(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2478],{8190:function(e,t,s){Promise.resolve().then(s.bind(s,7351))},7351:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(3827),l=s(4090),n=s(1441),r=s(826),i=s(6288);let c=e=>{let[t,s]=(0,l.useState)(!0),[a,n]=(0,l.useState)(null),[c,o]=(0,l.useState)([]),d=async()=>{try{s(!0);let[t,a]=await Promise.all([r.Z.get("/finance/summary?period=".concat(e)),r.Z.get("/finance/invoices")]);n(t.data),o(a.data)}catch(e){console.error("Error fetching finance:",e),i.toast.error("Failed to load financial data")}finally{s(!1)}};return(0,l.useEffect)(()=>{d()},[e]),{loading:t,stats:a,invoices:c,refetch:d}};var o=s(9733),d=s(8967),x=s(3051),m=s(3683),p=s(6185);function u(e){let{stats:t}=e;return t?(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:scale-110 transition-transform",children:(0,a.jsx)(o.Z,{size:80})}),(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Company Net Worth"}),(0,a.jsxs)("div",{className:"flex items-end gap-3 mb-1",children:[(0,a.jsx)("h4",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:t.net_worth}),(0,a.jsxs)("span",{className:"flex items-center font-black text-xs mb-1.5 ".concat(t.net_worth_trend>=0?"text-emerald-600":"text-rose-600"),children:[t.net_worth_trend>=0?(0,a.jsx)(d.Z,{size:14}):(0,a.jsx)(x.Z,{size:14})," ",Math.abs(t.net_worth_trend),"%"]})]}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-400",children:"vs Last Fiscal Year"})]}),(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:scale-110 transition-transform",children:(0,a.jsx)(m.Z,{size:80})}),(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Total Revenue"}),(0,a.jsxs)("div",{className:"flex items-end gap-3 mb-1",children:[(0,a.jsx)("h4",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:t.cashflow}),(0,a.jsxs)("span",{className:"flex items-center font-black text-xs mb-1.5 ".concat(t.cashflow_trend>=0?"text-emerald-600":"text-rose-600"),children:[t.cashflow_trend>=0?(0,a.jsx)(d.Z,{size:14}):(0,a.jsx)(x.Z,{size:14})," ",Math.abs(t.cashflow_trend),"%"]})]}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-slate-400",children:"Gross Inflow YTD"})]}),(0,a.jsxs)("div",{className:"bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 p-6 opacity-5 group-hover:scale-110 transition-transform",children:(0,a.jsx)(p.Z,{size:80})}),(0,a.jsx)("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Operating Margin"}),(0,a.jsxs)("div",{className:"flex items-end gap-3 mb-1",children:[(0,a.jsx)("h4",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:t.operating_margin}),(0,a.jsxs)("span",{className:"flex items-center font-black text-xs mb-1.5 ".concat(t.operating_margin_trend>=0?"text-emerald-600":"text-rose-600"),children:[t.operating_margin_trend>=0?(0,a.jsx)(d.Z,{size:14}):(0,a.jsx)(x.Z,{size:14})," ",Math.abs(t.operating_margin_trend),"%"]})]}),(0,a.jsxs)("p",{className:"text-[10px] font-bold text-slate-400",children:["Efficiency: ",t.efficiency_indicator]})]})]}):null}var h=s(7841);function b(e){let{invoices:t,onView:s}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] shadow-sm border border-slate-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-8 border-b border-slate-50 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"font-black text-slate-900 tracking-tight text-xl",children:"Recent Invoices"}),(0,a.jsxs)("span",{className:"text-xs font-bold text-slate-400 bg-slate-50 px-3 py-1 rounded-full uppercase tracking-widest",children:[t.length," Records"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left",children:[(0,a.jsx)("thead",{className:"bg-slate-50/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Client"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Amount"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Status"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Due Date"}),(0,a.jsx)("th",{className:"px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Action"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-slate-50",children:[t.map(e=>{var t;return(0,a.jsxs)("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[(0,a.jsx)("td",{className:"px-8 py-6",children:(0,a.jsx)("p",{className:"font-black text-slate-900 text-sm",children:(null===(t=e.to_company)||void 0===t?void 0:t.name)||e.client_name||"N/A"})}),(0,a.jsxs)("td",{className:"px-8 py-6 text-sm font-bold text-slate-600",children:["₹",(e.grand_total||e.amount||0).toLocaleString()]}),(0,a.jsx)("td",{className:"px-8 py-6",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ".concat("paid"===e.status?"bg-emerald-50 text-emerald-600 border-emerald-100":"overdue"===e.status?"bg-rose-50 text-rose-600 border-rose-100":"bg-amber-50 text-amber-600 border-amber-100"),children:e.status})}),(0,a.jsx)("td",{className:"px-8 py-6 text-xs font-bold text-slate-400",children:new Date(e.due_date).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-8 py-6",children:(0,a.jsx)("button",{onClick:()=>s(e),className:"p-2 bg-white border border-slate-200 text-slate-400 rounded-xl hover:text-blue-600 hover:border-blue-200 hover:shadow-lg hover:shadow-blue-50 transition-all active:scale-95",children:(0,a.jsx)(h.Z,{size:16})})})]},e._id||e.id)}),0===t.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-8 py-12 text-center text-slate-400 font-bold text-sm",children:"No invoices found."})})]})]})})]})}var f=s(9102),j=s.n(f),g=s(2235),v=s(94);function N(e){let{onClose:t,onSuccess:s}=e,[n,c]=(0,l.useState)({from_company:{name:"ERP Systems Ltd",address:"Tech Park, Bangalore",gst:"29ABCDE1234F1Z5",contact_person:"Admin",email:"accounts@erp.com"},to_company:{name:"",address:"",gst:"",contact_person:"",email:""},items:[{description:"",hsn_sac:"",quantity:1,rate:0,tax_rate:18}],payment_details:{bank_name:"",account_no:"",ifsc:"",mode:"Bank Transfer"},order_details:{po_number:"",po_date:new Date().toISOString().split("T")[0]},due_date:new Date().toISOString().split("T")[0],notes:""}),o=(e,t,s)=>{let a=[...n.items];a[e]={...a[e],[t]:s},c({...n,items:a})},d=e=>{c(t=>({...t,items:t.items.filter((t,s)=>s!==e)}))},x=async e=>{e.preventDefault();try{await r.Z.post("/finance/invoices",n),s(),i.toast.success("Invoice issued successfully! \uD83D\uDE80")}catch(e){console.error("Error creating invoice:",e),i.toast.error("Failed to create invoice. Please check the details.")}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d bg-white rounded-[2rem] p-8 max-w-4xl w-full shadow-2xl border border-slate-100 max-h-[90vh] overflow-y-auto animate-in zoom-in-95 duration-200",children:[(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d flex justify-between items-center mb-6 border-b border-slate-100 pb-4",children:[(0,a.jsx)("h3",{className:"jsx-c2b81c718f26230d text-2xl font-black text-slate-900 tracking-tight",children:"New B2B Invoice"}),(0,a.jsx)("button",{onClick:t,className:"jsx-c2b81c718f26230d p-2 text-slate-400 hover:bg-slate-50 rounded-full",children:(0,a.jsx)(g.Z,{size:24})})]}),(0,a.jsxs)("form",{onSubmit:x,className:"jsx-c2b81c718f26230d space-y-8",children:[(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d space-y-4",children:[(0,a.jsx)("h4",{className:"jsx-c2b81c718f26230d text-sm font-black text-slate-900 uppercase tracking-widest bg-slate-50 p-3 rounded-xl border border-slate-100",children:"Bill To (Client)"}),(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Company Name",required:!0,value:n.to_company.name,onChange:e=>c({...n,to_company:{...n.to_company,name:e.target.value}}),className:"jsx-c2b81c718f26230d input-field"}),(0,a.jsx)("input",{type:"text",placeholder:"GSTIN",value:n.to_company.gst,onChange:e=>c({...n,to_company:{...n.to_company,gst:e.target.value}}),className:"jsx-c2b81c718f26230d input-field"}),(0,a.jsx)("input",{type:"text",placeholder:"Contact Person",value:n.to_company.contact_person,onChange:e=>c({...n,to_company:{...n.to_company,contact_person:e.target.value}}),className:"jsx-c2b81c718f26230d input-field"}),(0,a.jsx)("input",{type:"email",placeholder:"Email",value:n.to_company.email,onChange:e=>c({...n,to_company:{...n.to_company,email:e.target.value}}),className:"jsx-c2b81c718f26230d input-field"}),(0,a.jsx)("textarea",{placeholder:"Legal Address",rows:2,value:n.to_company.address,onChange:e=>c({...n,to_company:{...n.to_company,address:e.target.value}}),className:"jsx-c2b81c718f26230d input-field col-span-2"})]})]}),(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d",children:[(0,a.jsx)("label",{className:"jsx-c2b81c718f26230d label",children:"PO Number"}),(0,a.jsx)("input",{type:"text",value:n.order_details.po_number,onChange:e=>c({...n,order_details:{...n.order_details,po_number:e.target.value}}),className:"jsx-c2b81c718f26230d input-field"})]}),(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d",children:[(0,a.jsx)("label",{className:"jsx-c2b81c718f26230d label",children:"PO Date"}),(0,a.jsx)("input",{type:"date",value:n.order_details.po_date,onChange:e=>c({...n,order_details:{...n.order_details,po_date:e.target.value}}),className:"jsx-c2b81c718f26230d input-field"})]}),(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d",children:[(0,a.jsx)("label",{className:"jsx-c2b81c718f26230d label",children:"Due Date"}),(0,a.jsx)("input",{type:"date",required:!0,value:n.due_date,onChange:e=>c({...n,due_date:e.target.value}),className:"jsx-c2b81c718f26230d input-field"})]})]}),(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d",children:[(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d flex justify-between items-center mb-2",children:[(0,a.jsx)("h4",{className:"jsx-c2b81c718f26230d text-sm font-black text-slate-900 uppercase tracking-widest",children:"Line Items"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{c(e=>({...e,items:[...e.items,{description:"",hsn_sac:"",quantity:1,rate:0,tax_rate:18}]}))},className:"jsx-c2b81c718f26230d text-xs font-bold text-blue-600 hover:bg-blue-50 px-3 py-1 rounded-lg transition-colors flex items-center gap-1",children:[(0,a.jsx)(v.Z,{size:14})," Add Item"]})]}),(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d space-y-2",children:n.items.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d grid grid-cols-12 gap-2 items-center bg-slate-50 p-2 rounded-xl border border-slate-100",children:[(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d col-span-4",children:(0,a.jsx)("input",{type:"text",placeholder:"Description",value:e.description,onChange:e=>o(t,"description",e.target.value),className:"jsx-c2b81c718f26230d input-field-sm"})}),(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d col-span-2",children:(0,a.jsx)("input",{type:"text",placeholder:"HSN",value:e.hsn_sac,onChange:e=>o(t,"hsn_sac",e.target.value),className:"jsx-c2b81c718f26230d input-field-sm"})}),(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d col-span-1",children:(0,a.jsx)("input",{type:"number",placeholder:"Qty",value:e.quantity,onChange:e=>o(t,"quantity",parseFloat(e.target.value)),className:"jsx-c2b81c718f26230d input-field-sm"})}),(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d col-span-2",children:(0,a.jsx)("input",{type:"number",placeholder:"Rate",value:e.rate,onChange:e=>o(t,"rate",parseFloat(e.target.value)),className:"jsx-c2b81c718f26230d input-field-sm"})}),(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d col-span-1 text-right text-xs font-bold text-slate-500",children:(e.quantity*e.rate).toLocaleString()}),(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d col-span-1 text-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>d(t),className:"jsx-c2b81c718f26230d text-rose-500 hover:bg-rose-50 p-1 rounded-full",children:(0,a.jsx)(g.Z,{size:14})})})]},t))}),(0,a.jsx)("div",{className:"jsx-c2b81c718f26230d flex justify-end mt-4 text-right",children:(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d bg-slate-900 text-white p-4 rounded-xl min-w-[200px]",children:[(0,a.jsx)("p",{className:"jsx-c2b81c718f26230d text-xs font-medium opacity-70",children:"Total Estimated"}),(0,a.jsxs)("p",{className:"jsx-c2b81c718f26230d text-xl font-bold",children:["₹",n.items.reduce((e,t)=>e+t.quantity*t.rate*1.18,0).toLocaleString(void 0,{maximumFractionDigits:0})]})]})})]}),(0,a.jsxs)("div",{className:"jsx-c2b81c718f26230d pt-4 border-t border-slate-100 flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"jsx-c2b81c718f26230d px-6 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"jsx-c2b81c718f26230d bg-blue-600 text-white px-8 py-3 rounded-xl font-black hover:bg-blue-700 shadow-xl shadow-blue-100 transition-all active:scale-95",children:"Issue Invoice"})]})]}),(0,a.jsx)(j(),{id:"c2b81c718f26230d",children:".input-field.jsx-c2b81c718f26230d{@apply w-full border-none p-3 rounded-xl bg-slate-50 focus:ring-2 focus:ring-blue-500/20 outline-none transition-all font-bold text-slate-900 text-sm;}.input-field-sm.jsx-c2b81c718f26230d{@apply w-full border-none p-2 rounded-lg bg-white focus:ring-2 focus:ring-blue-500/20 outline-none transition-all font-medium text-slate-700 text-xs;}.label.jsx-c2b81c718f26230d{@apply block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 px-1;}"})]})})}var y=s(4715);function _(e){var t,s,l;let{invoice:n,onClose:c}=e,o=async()=>{try{var e;let t=await r.Z.get("/finance/invoices/".concat(n._id||n.id,"/pdf"),{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=s,a.setAttribute("download","invoice_".concat(n.invoice_number||"download",".pdf")),document.body.appendChild(a),a.click(),null===(e=a.parentNode)||void 0===e||e.removeChild(a),i.toast.success("Invoice PDF downloaded!")}catch(e){console.error("PDF Download failed",e),i.toast.error("Failed to download PDF. Please try again.")}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4 z-[60]",children:(0,a.jsxs)("div",{className:"bg-white rounded-[2.5rem] p-10 max-w-3xl w-full shadow-2xl border border-slate-100 animate-in zoom-in-95 duration-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-8 border-b border-slate-100 pb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("span",{className:"px-4 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ".concat("paid"===n.status?"bg-emerald-50 text-emerald-600 border-emerald-100":"overdue"===n.status?"bg-rose-50 text-rose-600 border-rose-100":"bg-amber-50 text-amber-600 border-amber-100"),children:n.status}),(0,a.jsx)("span",{className:"text-slate-400 font-bold text-xs",children:n.invoice_number||"INV-PREVIEW"})]}),(0,a.jsx)("h3",{className:"text-4xl font-black text-slate-900 tracking-tight",children:(null===(t=n.to_company)||void 0===t?void 0:t.name)||n.client_name}),(0,a.jsx)("p",{className:"text-slate-400 text-sm font-medium mt-1",children:(null===(s=n.to_company)||void 0===s?void 0:s.address)||"No Address Provided"})]}),(0,a.jsx)("button",{onClick:c,className:"p-2 text-slate-400 hover:bg-slate-50 rounded-full",children:(0,a.jsx)(g.Z,{size:24})})]}),(0,a.jsxs)("div",{className:"border rounded-2xl border-slate-100 overflow-hidden mb-8",children:[(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500 font-bold text-xs uppercase tracking-wider",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4",children:"Description"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Rate"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Qty"}),(0,a.jsx)("th",{className:"p-4 text-right",children:"Amount"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100 text-slate-700 font-medium",children:null===(l=n.items)||void 0===l?void 0:l.map((e,t)=>{var s,l;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"p-4",children:e.description||"Service Charge"}),(0,a.jsx)("td",{className:"p-4 text-right",children:(null===(s=e.rate)||void 0===s?void 0:s.toLocaleString())||(n.amount/(e.quantity||1)).toLocaleString()}),(0,a.jsx)("td",{className:"p-4 text-right",children:e.quantity||1}),(0,a.jsx)("td",{className:"p-4 text-right",children:(e.rate*e.quantity).toLocaleString()||(null===(l=n.amount)||void 0===l?void 0:l.toLocaleString())})]},t)})})]}),(0,a.jsx)("div",{className:"bg-slate-50/50 p-4 border-t border-slate-100 flex justify-end",children:(0,a.jsxs)("div",{className:"text-right space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between gap-12 text-slate-500 text-xs",children:[(0,a.jsx)("span",{children:"Subtotal:"})," ",(0,a.jsxs)("span",{children:["₹",(n.subtotal||n.amount||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-12 text-slate-500 text-xs",children:[(0,a.jsx)("span",{children:"Tax (18%):"})," ",(0,a.jsxs)("span",{children:["₹",(n.tax_total||.18*(n.amount||0)||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex justify-between gap-12 text-slate-900 font-black text-lg pt-2 border-t border-slate-200 mt-2",children:[(0,a.jsx)("span",{children:"Total:"})," ",(0,a.jsxs)("span",{children:["₹",(n.grand_total||n.amount||0).toLocaleString()]})]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("button",{onClick:o,className:"flex-1 bg-slate-900 text-white py-4 rounded-2xl font-black hover:bg-slate-800 shadow-xl shadow-slate-200 transition-all active:scale-95 flex items-center justify-center gap-2",children:[(0,a.jsx)(y.Z,{size:18})," Download PDF Invoice"]}),(0,a.jsx)("button",{onClick:c,className:"flex-1 py-4 rounded-2xl font-black text-slate-400 hover:bg-slate-50 transition-all",children:"Close Viewer"})]})]})})}function w(e){let{selected:t,onChange:s}=e;return(0,a.jsx)("div",{className:"bg-white border border-slate-200 rounded-2xl p-1 flex",children:["year","month","week"].map(e=>(0,a.jsx)("button",{onClick:()=>s(e),className:"px-4 py-2 rounded-xl text-xs font-black uppercase tracking-widest transition-all ".concat(t===e?"bg-slate-900 text-white shadow-lg":"text-slate-400 hover:text-slate-600"),children:e},e))})}function k(){let[e,t]=(0,l.useState)("year"),[s,o]=(0,l.useState)(!1),[d,x]=(0,l.useState)(null),{loading:m,stats:p,invoices:h,refetch:f}=c(e),j=async()=>{try{var e;let t=await r.Z.get("/finance/audit/export",{responseType:"blob"}),s=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement("a");a.href=s,a.setAttribute("download","financial_audit_".concat(new Date().getFullYear(),".xlsx")),document.body.appendChild(a),a.click(),null===(e=a.parentNode)||void 0===e||e.removeChild(a),i.toast.success("Audit Report downloaded successfully!")}catch(e){console.error("Audit Download failed",e),i.toast.error("Failed to download Audit Report.")}};return(0,a.jsxs)("div",{className:"flex min-h-screen bg-[#f8fafc] flex-col md:flex-row",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("main",{className:"flex-1 p-4 md:p-10 overflow-y-auto max-h-screen custom-scrollbar",children:[(0,a.jsxs)("header",{className:"mb-10 flex flex-col md:flex-row md:justify-between md:items-end gap-4 border-b border-slate-200 pb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"bg-blue-600 w-2 h-2 rounded-full animate-pulse"}),(0,a.jsx)("span",{className:"text-blue-600 font-black text-[10px] uppercase tracking-[0.2em]",children:"Strategic Intelligence"})]}),(0,a.jsx)("h2",{className:"text-3xl md:text-5xl font-black text-slate-900 tracking-tight flex items-center gap-4",children:"Financial Health"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2 font-bold text-sm md:text-base opacity-80 italic",children:"Real-time monitoring of company net worth, revenue trends, and profitability."})]}),(0,a.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,a.jsx)(w,{selected:e,onChange:t}),(0,a.jsxs)("button",{onClick:j,className:"bg-white border-2 border-slate-100 text-slate-700 px-6 py-3 rounded-2xl font-black text-sm hover:bg-slate-50 transition-all shadow-sm active:scale-95 flex items-center gap-2",children:[(0,a.jsx)(y.Z,{size:18})," Audit"]}),(0,a.jsxs)("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-2xl font-black text-sm hover:bg-blue-700 transition-all shadow-xl shadow-blue-100 active:scale-95 flex items-center gap-2",children:[(0,a.jsx)(v.Z,{size:18})," New Invoice"]})]})]}),m?(0,a.jsxs)("div",{className:"space-y-8 animate-pulse",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 h-48",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"bg-white rounded-[2.5rem] border border-slate-100"},e))}),(0,a.jsx)("div",{className:"bg-white h-96 rounded-[2.5rem] border border-slate-100"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u,{stats:p}),(0,a.jsx)(b,{invoices:h,onView:e=>x(e)})]}),s&&(0,a.jsx)(N,{onClose:()=>o(!1),onSuccess:()=>{o(!1),f()}}),d&&(0,a.jsx)(_,{invoice:d,onClose:()=>x(null)})]})]})}},1441:function(e,t,s){"use strict";s.d(t,{Z:function(){return L}});var a=s(3827),l=s(4090),n=s(7907),r=s(333),i=s(5423),c=s(7404),o=s(438),d=s(6170),x=s(9733),m=s(2071),p=s(7898),u=s(5032),h=s(5199),b=s(3854),f=s(2379),j=s(527),g=s(4059),v=s(5497),N=s(3151),y=s(3683),_=s(7307),w=s(3329),k=s(5431),Z=s(9475),C=s(4562),S=s(8390),R=s(3236),D=s(9910),z=s(2235),P=s(9744),E=s(1049),A=s(8792);function L(){let{user:e,logout:t}=(0,r.t)(),s=(0,n.useRouter)(),L=(0,n.usePathname)(),[I,F]=(0,l.useState)(!1);if(!e)return null;let O=[{title:"Command Center",items:[{name:"Dashboard",icon:i.Z,href:"/dashboard",roles:["super_admin"]},{name:"Insights",icon:c.Z,href:"/insights",roles:["super_admin"]},{name:"ERP Assistant",icon:o.Z,href:"/assistant",roles:["super_admin"]}]},{title:"Strategy & Growth",items:[{name:"OKRs",icon:d.Z,href:"/okrs",roles:["super_admin","dept_admin"]},{name:"Financials",icon:x.Z,href:"/financials",roles:["super_admin"]},{name:"Reports",icon:m.Z,href:"/reports",roles:["super_admin"]}]},{title:"Work Engine",items:[{name:"Projects",icon:p.Z,href:"/projects",roles:["super_admin","dept_admin"]},{name:"Sprints",icon:u.Z,href:"/sprints",roles:["super_admin","dept_admin"]},{name:"Tasks",icon:h.Z,href:"/tasks",roles:["super_admin","dept_admin","employee"]}]},{title:"HR Panel",items:[{name:"Onboarding",icon:b.Z,href:"/hr/onboarding",roles:["super_admin","dept_admin","employee"]},{name:"Approvals",icon:f.Z,href:"/hr/approvals",roles:["super_admin","dept_admin"]},{name:"ID Card",icon:j.Z,href:"/hr/id-card",roles:["super_admin","dept_admin","employee"]}]},{title:"CRM Suite",items:[{name:"CRM Dashboard",icon:i.Z,href:"/crm/dashboard",roles:["super_admin","dept_admin"]},{name:"Leads",icon:g.Z,href:"/crm/leads",roles:["super_admin","dept_admin","employee"]},{name:"Deals",icon:x.Z,href:"/crm/deals",roles:["super_admin","dept_admin"]}]},{title:"Human Capital",items:[{name:"Employees",icon:g.Z,href:"/users",roles:["super_admin","dept_admin"]},{name:"Employee Analytics",icon:v.Z,href:"/employee-analytics",roles:["super_admin","dept_admin"]},{name:"HR Operations",icon:N.Z,href:"/hr-ops",roles:["super_admin","dept_admin"]},{name:"Payroll",icon:y.Z,href:"/salaries",roles:["super_admin","accountant"]},{name:"Attendance",icon:_.Z,href:"/attendance",roles:["super_admin","dept_admin","employee"]}]},{title:"Operations",items:[{name:"Rules Engine",icon:w.Z,href:"/rules",roles:["super_admin"]},{name:"Assets",icon:k.Z,href:"/assets",roles:["super_admin"]},{name:"Documents",icon:Z.Z,href:"/documents",roles:["super_admin","dept_admin","employee"]},{name:"Wiki",icon:C.Z,href:"/wiki",roles:["super_admin","dept_admin","employee"]}]},{title:"System",items:[{name:"Audit Logs",icon:S.Z,href:"/audit-logs",roles:["super_admin"]},{name:"Verify Service",icon:R.Z,href:"/verify",roles:["super_admin","dept_admin","employee"]},{name:"Settings",icon:D.Z,href:"/settings",roles:["super_admin"]}]}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"md:hidden bg-slate-900 text-white p-4 flex justify-between items-center sticky top-0 z-50",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"ERP Portal"}),(0,a.jsx)("button",{onClick:()=>F(!I),children:I?(0,a.jsx)(z.Z,{size:24}):(0,a.jsx)(P.Z,{size:24})})]}),I&&(0,a.jsx)("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-40 md:hidden",onClick:()=>F(!1)}),(0,a.jsxs)("aside",{className:"\n        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900 text-white p-6 transform transition-transform duration-200 ease-in-out\n        md:relative md:translate-x-0 overflow-y-auto custom-scrollbar\n        ".concat(I?"translate-x-0":"-translate-x-full","\n      "),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-10 px-2",children:[(0,a.jsx)("div",{className:"bg-blue-600 p-2 rounded-xl shadow-lg shadow-blue-500/20",children:(0,a.jsx)(N.Z,{size:24,className:"text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-black tracking-tight hidden md:block",children:"ERP Portal"})]}),(0,a.jsxs)("nav",{className:"space-y-8",children:[O.map(t=>{let s=t.items.filter(t=>!!t.roles.includes(e.role));return 0===s.length?null:(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"px-3 mb-3 text-[10px] font-black uppercase tracking-[0.2em] text-slate-500",children:t.title}),(0,a.jsx)("div",{className:"space-y-1",children:s.map(e=>{let t=L===e.href;return(0,a.jsxs)(A.default,{href:e.href,onClick:()=>F(!1),className:"flex items-center gap-3 p-3 rounded-xl transition-all font-bold text-sm ".concat(t?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:[(0,a.jsx)(e.icon,{size:18}),(0,a.jsx)("span",{children:e.name})]},e.name)})})]},t.title)}),(0,a.jsx)("div",{className:"pt-6 border-t border-slate-800",children:(0,a.jsxs)("button",{onClick:()=>{t(),s.push("/login")},className:"flex items-center gap-3 p-3 rounded-xl hover:bg-red-900/20 text-red-400 hover:text-red-300 transition-all w-full text-left font-bold text-sm",children:[(0,a.jsx)(E.Z,{size:18})," ",(0,a.jsx)("span",{children:"Logout"})]})})]})]})]})}},826:function(e,t,s){"use strict";var a=s(3107),l=s(333);let n=a.Z.create({baseURL:"http://localhost:8000/api/v1"});n.interceptors.request.use(e=>{let t=l.t.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),n.interceptors.response.use(e=>e.data&&e.data.success?e.data:e,e=>{var t,s,a;let n=e.config,r=null===(t=e.response)||void 0===t?void 0:t.data,i=(null==r?void 0:r.message)||"A critical system error occurred. Please contact architecture support.";return(null===(s=e.response)||void 0===s?void 0:s.status)!==401||n._retry||(l.t.getState().logout(),window.location.href="/login"),console.error("[API ERROR] ".concat(null===(a=e.response)||void 0===a?void 0:a.status,":"),i),Promise.reject({message:i,code:(null==r?void 0:r.error_code)||"NETWORK_ERROR",details:(null==r?void 0:r.details)||{}})}),t.Z=n},333:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var a=s(2020),l=s(5249);let n=(0,a.Ue)()((0,l.tJ)(e=>({user:null,token:null,setUser:t=>e({user:t}),setToken:t=>e({token:t}),logout:()=>e({user:null,token:null})}),{name:"auth-storage"}))}},function(e){e.O(0,[4549,2649,3107,6288,9200,2971,8069,1744],function(){return e(e.s=8190)}),_N_E=e.O()}]);