(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{8395:function(e,t,s){Promise.resolve().then(s.bind(s,4338))},4338:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var r=s(3827),a=s(4090),l=s(7907),n=s(826),o=s(333);function i(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),c=(0,l.useRouter)(),m=(0,o.t)(e=>e.setToken),p=(0,o.t)(e=>e.setUser),b=async t=>{t.preventDefault(),d("");try{let t=new FormData;t.append("username",e),t.append("password",s);let{data:r}=await n.Z.post("/auth/login",t);m(r.access_token);let{data:a}=await n.Z.get("/users/me");p(a),c.push(r.redirect_url||"/dashboard")}catch(e){var r,a;d((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.detail)||"Login failed")}};return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-slate-50 p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white p-8 shadow-xl border border-slate-100",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-extrabold text-slate-900",children:"ERP Portal"}),(0,r.jsx)("p",{className:"text-slate-500 mt-2",children:"Enterprise management simplified"})]}),u&&(0,r.jsx)("p",{className:"mb-4 text-sm bg-red-50 text-red-600 p-3 rounded-lg border border-red-100",children:u}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Corporate Email"}),(0,r.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full rounded-xl border border-slate-200 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"name@company.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-semibold text-slate-700",children:"Password"}),(0,r.jsx)("input",{type:"password",value:s,onChange:e=>i(e.target.value),className:"w-full rounded-xl border border-slate-200 p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"••••••••",required:!0})]}),(0,r.jsx)("button",{type:"submit",className:"w-full rounded-xl bg-blue-600 py-3 font-bold text-white hover:bg-blue-700 shadow-lg shadow-blue-200 transition-all active:scale-[0.98]",children:"Sign In"})]})]})})}},826:function(e,t,s){"use strict";var r=s(3107),a=s(333);let l=r.Z.create({baseURL:"http://localhost:8000/api/v1"});l.interceptors.request.use(e=>{let t=a.t.getState().token;return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),l.interceptors.response.use(e=>e.data&&e.data.success?e.data:e,e=>{var t,s,r;let l=e.config,n=null===(t=e.response)||void 0===t?void 0:t.data,o=(null==n?void 0:n.message)||"A critical system error occurred. Please contact architecture support.";return(null===(s=e.response)||void 0===s?void 0:s.status)!==401||l._retry||(a.t.getState().logout(),window.location.href="/login"),console.error("[API ERROR] ".concat(null===(r=e.response)||void 0===r?void 0:r.status,":"),o),Promise.reject({message:o,code:(null==n?void 0:n.error_code)||"NETWORK_ERROR",details:(null==n?void 0:n.details)||{}})}),t.Z=l},333:function(e,t,s){"use strict";s.d(t,{t:function(){return l}});var r=s(2020),a=s(5249);let l=(0,r.Ue)()((0,a.tJ)(e=>({user:null,token:null,setUser:t=>e({user:t}),setToken:t=>e({token:t}),logout:()=>e({user:null,token:null})}),{name:"auth-storage"}))}},function(e){e.O(0,[4549,3107,2971,8069,1744],function(){return e(e.s=8395)}),_N_E=e.O()}]);